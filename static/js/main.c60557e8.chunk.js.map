{"version":3,"sources":["Spinner.js","index.js","utils.js"],"names":["Spinner","props","state","spinCount","view","h","w","data","error","info","console","log","height","window","innerHeight","width","innerWidth","this","setState","setSize","url","Utils","getQueryParameter","path","document","location","pathname","endsWith","fetch","method","then","res","text","body","json","JSON","parse","e","catch","alert","deg","radius","rad","Math","PI","x","cos","y","sin","center","startDeg","endDeg","i","min","p","cacluatePointOnCircle","slice","ringNumber","ringCount","sliceNumber","numberOfSlices","sliceWidth","key","pieSize","halfSlice","transform","d","createLinesAlongCurve","fill","getColor","stroke","strokeWidth","textAnchor","fontSize","length","viewPort","map","spinner","isBackwards","randomRotation","round","random","centerStringPx","sliceSize","snap","className","addRule","renderSlice","onMouseUp","refresh","renderSpinners","React","Component","ReactDOM","render","Fragment","getElementById","COLORS","deleteExistingScript","id","children","head","childNodes","child","nodeName","removeChild","module","exports","name","search","charAt","substring","split","nv","outOf","styleEl","createElement","setAttribute","appendChild","styleSheet","sheet","rules","Object","values","forEach","r","insertRule"],"mappings":"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","file":"static/js/main.c60557e8.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Utils from './utils';\n\nclass Spinner extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            spinCount: 1,\n            view: { h: 0, w: 0 }, \n            data: []\n        }\n    }\n\n    componentDidCatch(error, info) {\n        console.log(\"Error\", error, info);\n    }\n\n    setSize() {\n        const height = window.innerHeight - 2;\n        const width = window.innerWidth - 2;\n        this.setState({ \n            view: { h: height, w: width },\n        });\n    }\n\n    componentDidMount() {\n        this.setSize();\n        let url = Utils.getQueryParameter('url');\n        if (!url) {\n            let path = document.location.pathname;\n            if (!path.endsWith(\"/\")) {\n                path += \"/\";\n            }\n            url = path + 'spinners/default.json';\n        }\n        console.log('Loading', url)\n        fetch(url, {method: 'GET'}).\n        then(res => res.text()).\n        then(body => {\n            try {\n                console.log(\"Content\", body);\n                const json = JSON.parse(body);\n                console.log(\"Loaded\", json);\n                this.setState({\n                    data: json\n                });\n            } catch (e) {\n                console.error(\"Error\", e);\n            }\n        }).catch(e => {\n            window.alert(`Unable to read data from ${url} : ${e}`);\n            console.error(\"Error\", e);\n        })\n    }\n\n    cacluatePointOnCircle(deg, radius) {\n        // 𝑥=𝑟 sin𝜃, 𝑦 = 𝑟 cos𝜃.\n        const piFactor = (Math.PI / 180);\n        const rad = deg * piFactor;\n        return { \n            x: Math.cos(rad) * radius, \n            y: Math.sin(rad) * radius\n        };\n      }\n  \n      createLinesAlongCurve(center, startDeg, endDeg, radius) {\n          const deltaDeg = 5;\n          let data = \"M \" + center.x + \" \" + center.y + \" \\n\";\n          for(let i = startDeg; i < (endDeg + deltaDeg); i = i + deltaDeg) {\n              const deg = Math.min(i, endDeg);\n              const p = this.cacluatePointOnCircle(deg, radius);\n              let x = center.x + p.x;\n              let y = center.y + p.y;\n              data += \" L \" + x + \" \" + y + \" \\n\";\n          }\n          return data + \" z\";\n    }\n \n    renderSlice(center, radius, slice, ringNumber, ringCount, sliceNumber, numberOfSlices) {\n        const sliceWidth = radius - (radius/ringCount) *  ringNumber;\n        const key = \"r\" + ringNumber + \"s\" + sliceNumber;\n        const pieSize = 360 / (numberOfSlices);\n        const halfSlice = pieSize / 2;\n        return (\n            <g key={\"g\" + key} transform={\"rotate(\" + (pieSize * sliceNumber) + \" \" + center.x  + \" \" + center.y + \")\"}>\n                <path key={\"p\" + key} d={this.createLinesAlongCurve(center, -halfSlice, halfSlice, sliceWidth)}\n                    fill={Utils.getColor(sliceNumber, numberOfSlices)} stroke=\"#000\" strokeWidth={1}/>\n                <text key={\"t\" + key} x={center.x + sliceWidth - 25} y={center.y} textAnchor=\"end\" fontSize=\"1.15em\">{slice}</text>\n            </g>\n        );\n    }\n\n\n    renderSpinners() {\n        const ringCount = this.state.data.length;\n        const viewPort = this.state.view;\n        let radius = viewPort.h / 2;\n        let center = { \n            x: viewPort.w / 2,\n            y: viewPort.h / 2\n        };\n\n        if (viewPort.w < viewPort.h) {\n            radius = viewPort.w - 50;\n            center.x = 25;\n        }\n        console.log(viewPort, radius, center);\n\n        return this.state.data.map((spinner, ringNumber) => {\n            let isBackwards = ringNumber % 2 == 0 ? 1 : -1;\n            let randomRotation =  Math.round(720 + 360 * Math.random());\n            let centerStringPx = \" \" + Math.round(center.x) + \"px \" + Math.round(center.y) + \"px\";\n            let sliceSize = Math.round(360 / spinner.length);\n            let snap = sliceSize - (randomRotation % sliceSize);\n            \n            let className = \"cssRule\" + ringNumber;\n            Utils.addRule(className,\n                ` @keyframes ${className} {\n                    0% {\n                        transform:rotate(0deg);\n                        transform-origin: ${centerStringPx};\n                    } \n                    100% {\n                        transform:rotate(${(randomRotation+snap) * isBackwards}deg);\n                        transform-origin: ${centerStringPx};\n                    }\n                }`,\n                ` .${className} { \n                    background: red;\n                    animation-name: ${className};\n                    animation-duration: 4s;\n                    animation-fill-mode: forwards;\n                }`);\n\n            \n            return (\n                <g key={\"g\" + ringNumber + \"_\" + this.state.spinCount} className={className}>\n                    <g key={\"ring\" + ringNumber + \"_\" + this.state.spinCount}>\n                        {\n                        spinner.map((slice,sliceNumber) => {\n                            return this.renderSlice(center, radius, slice, ringNumber, ringCount, sliceNumber, spinner.length);\n                        })}\n                    </g>\n               </g>\n            );\n        });\n    }\n\n    render() {\n        return (\n            <div onMouseUp={(e) => this.refresh()}>\n                <svg key={\"s\" + this.state.spinCount} width={this.state.view.w} height={this.state.view.h}>\n                    {this.renderSpinners()}\n                </svg>\n            </div>\n        );\n    }\n\n    refresh() {\n        this.setSize();\n        let spinCount = this.state.spinCount + 1;\n        this.setState({\n            spinCount: spinCount\n        });\n    }\n}\n\nexport default Spinner;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Spinner from './Spinner';\n\nReactDOM.render(\n  <React.Fragment>\n    <Spinner />\n  </React.Fragment>,\n  document.getElementById('root')\n);","\nconst COLORS = [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#ff7f00\",\"#6a3d9a\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#b15928\"];\n\n\nfunction deleteExistingScript(id) {\n    let children = document.head.childNodes;\n    for (let i = 0; i < children.length; i += 1) {\n        const child = children[i];\n        if (child.nodeName === \"STYLE\" && child.id === id) {\n            console.log(\"Removing\", child.id);\n            document.head.removeChild(child);\n        }\n    }\n}\n\n\nmodule.exports = {\n    getQueryParameter: (name) => {\n        let search = document.location.search;\n        if (search && search.length > 1) {\n            if (search.charAt(0) == '?') {\n                search = search.substring(1);\n            }\n            let split = search.split(\"&\");\n            for(let i = 0; i < split.length; i++) {\n                let nv = split[i].split(\"=\");\n                if (nv && nv.length == 2 && nv[0] === name) {\n                    return nv[1];\n                }\n            }\n        }\n    },\n\n\n    getColor: (i, outOf) => {\n        if (COLORS.length == (outOf - 1)) {\n            return COLORS[i % (COLORS.length - 1)];\n        } else {\n            return COLORS[i % COLORS.length];\n        }\n    },\n\n    addRule: (id, ...rules) => {\n        deleteExistingScript(id);\n        styleEl = document.createElement(\"style\");\n        styleEl.setAttribute(\"id\", id);\n        document.head.appendChild(styleEl);\n        var styleSheet = styleEl.sheet;\n        Object.values(rules).forEach((r,i) => {\n            styleSheet.insertRule(r, i);\n            //console.log(r)\n        });\n        //console.log(styleSheet);\n    }\n};"],"sourceRoot":""}