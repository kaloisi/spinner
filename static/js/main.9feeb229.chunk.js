(this.webpackJsonpspinner=this.webpackJsonpspinner||[]).push([[0],{13:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(3),o=n.n(i),s=n(4),c=n(5),h=n(7),u=n(6),d=n(0),l=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#b15928"],f=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={spinCount:1,view:{h:0,w:0},center:{y:0,x:0},data:[]},r}return Object(c.a)(n,[{key:"componentDidCatch",value:function(t,e){console.log("Error",t,e)}},{key:"setSize",value:function(){var t=window.innerHeight,e=window.innerWidth;this.setState({view:{h:t,w:e},center:{y:t/2,x:25}})}},{key:"componentDidMount",value:function(){var t=this;this.setSize();fetch("spinners/key_n_positions.json",{method:"GET"}).then((function(t){return t.json()})).then((function(e){try{console.log("Loaded",e),t.setState({data:e})}catch(n){console.log("Error",n)}})).catch((function(t){console.log("Error",t)}))}},{key:"cacluatePointOnCircle",value:function(t,e){var n=t*(Math.PI/180);return{x:Math.cos(n)*e,y:Math.sin(n)*e}}},{key:"createLinesAlongCurve",value:function(t,e,n){for(var r=this.state.center,a="M "+r.x+" "+r.y+" \n",i=t;i<e+5;i+=5){var o=Math.min(i,e),s=this.cacluatePointOnCircle(o,n);a+=" L "+(r.x+s.x)+" "+(r.y+s.y)+" \n"}return a+" z"}},{key:"getColor",value:function(t,e){return l.length==e-1?l[t%(l.length-1)]:l[t%l.length]}},{key:"renderSlice",value:function(t,e,n,r,a){var i=this.state.view.w-2*this.state.center.x,o=i-i/n*e,s="r"+e+"s"+r,c=360/a,h=c/2;return Object(d.jsxs)("g",{transform:"rotate("+c*r+" "+this.state.center.x+" "+this.state.center.y+")",children:[Object(d.jsx)("path",{d:this.createLinesAlongCurve(-h,h,o),fill:this.getColor(r,a),stroke:"#000",strokeWidth:1},"p"+s),Object(d.jsx)("text",{x:o,y:this.state.center.y,textAnchor:"end",fontSize:"1.15em",children:t},"t"+s)]},"g"+s)}},{key:"addRule",value:function(t){var e=document.getElementById(t);e&&document.head.removeChild(e),(e=document.createElement("style")).setAttribute("id",t),document.head.appendChild(e);for(var n=e.sheet,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];Object.values(a).forEach((function(t,e){n.insertRule(t,e),console.log(t)})),console.log(n)}},{key:"renderSpinner",value:function(t,e,n){var r=this,a=e%2==0?1:-1,i=Math.round(720+360*Math.random()),o=" "+this.state.center.x+" "+this.state.center.y,s=" "+Math.round(this.state.center.x)+"px "+Math.round(this.state.center.y)+"px",c=Math.round(360/t.length),h=c-i%c,u="cssRule"+e+"_"+this.state.spinCount;return this.addRule(u," @keyframes ".concat(u," {\n                0% {\n                    transform:rotate(0deg);\n                    transform-origin: ").concat(s,";\n                } \n                35% {\n                    transform:rotate(").concat(i/2*a,"deg);\n                    transform-origin: ").concat(s,";\n                } \n                90% {\n                    transform:rotate(").concat(i*a,"deg);\n                    transform-origin: ").concat(s,";\n                }\n                100% {\n                    transform:rotate(").concat((i+h)*a,"deg);\n                    transform-origin: ").concat(s,";\n                }\n            }")," .".concat(u," { \n                background: red;\n                animation-name: ").concat(u,";\n                animation-duration: 4s;\n            }")),Object(d.jsx)("g",{className:u,children:Object(d.jsx)("g",{transform:"rotate("+(i+h)*a+" "+o+")",children:t.map((function(a,i){return r.renderSlice(a,e,n,i,t.length)}))},"ring"+e+"_"+this.state.spinCount)},"g"+e+"_"+this.state.spinCount)}},{key:"renderSpinners",value:function(){var t=this;return this.state.data.map((function(e,n){return t.renderSpinner(e,n,t.state.data.length)}))}},{key:"refresh",value:function(){this.setSize();var t=this.state.spinCount+1;this.setState({spinCount:t})}},{key:"render",value:function(){var t=this;return Object(d.jsx)("div",{children:Object(d.jsx)("svg",{width:this.state.view.w,height:this.state.view.h,onMouseUp:function(e){return t.refresh()},children:this.renderSpinners()},"s"+this.state.spinCount)})}}]),n}(a.a.Component),g=f;o.a.render(Object(d.jsx)(a.a.Fragment,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.9feeb229.chunk.js.map